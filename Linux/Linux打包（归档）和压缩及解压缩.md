# Linux打包（归档）和压缩及解压缩


* **打包**：将多个文件及目录存储在一个文件中，如`tar`

* **压缩**：利用算法对文件进行处理，从而达到减小占用磁盘空间的目的,如`gzip`, `zip`, `bzip2`等
	- 有损压缩：即便丢失个别的数据，对文件也不会造成太大的影响，`mpeg`、`mp3`、`jpg` 等格式
	- 无损压缩：压缩数据必须准确无误	

## tar打包命令

tar命令格式: `tar [选项] 源文件或目录`

| 选项 | 含义 | 备注 |
| --- | ------- | ---- |
|`-c`|创建打包文件，可搭配 -v 来察看过程中被打包的文件名(filename)| --- |
|`-t`|查看打包文件的内容含有哪些文件名，重点在查看文件名；| --- |
|`-x`|解打包或解压缩的功能，可以搭配 -C (大写) 在特定目录解开, 特别留意的是， `-c`、`-t`、`-x` 不可同时出现在一串命令列中。| --- |
|`-j`|通过 `bzip2` 的支持进行压缩/解压缩：此时文件名最好为 `*.tar.bz2`, gzip 是 GNU 组织开发的一个压缩程序| --- |
|`-z`|通过 `gzip` 的支持进行压缩/解压缩：此时文件名最好为 `*.tar.gz`,bzip2 是一个压缩能力更强的压缩程序| --- |
|`-v`|在压缩/解压缩的过程中，将正在处理的文件名显示出来！|
|`-f filename`| `-f` 后面要立刻接要被处理的文件名！建议 `-f` 单独写一个选项！| --- |
|`-C` 目录| 改变至目录 DIR。这个选项用在解压缩，若要在特定目录解压缩，可以使用这个选项。这个用在压缩，可以指定绝对路径。| --- |
|`-p`| 保留备份数据的原本权限与属性，常用于备份(-c)重要的配置文件| --- |
|`-P`| 留绝对路径，亦即允许备份数据中含有根目录存在之意；| --- |
|`--exclude=FILE`| 在压缩的过程中，不要将 FILE 打包！| --- |

## tar命令打包不压缩

* `tar -cvf www.tar www`: 将目录`www`打包到新文件`www.tar`中

* `tar -cvf blog.tar index.html ./blog/`: 将文件`index.html`及目录`./blog/`打包成`blog.tar`文件

> 选项 "-cvf" 一般是习惯用法，记住打包时需要指定打包之后的文件名，而且要使用`.tar`作为扩展名



### tar解包

* `tar -xvf www.tar`: 将目录`www.tar `解包到当前目录

* `tar -xvf www.tar -C ./www`: 将目录`www.tar `解包到当前目录下的www目录下

## tar命令打包压缩

### gzip
* `tar -zcvf tmp.tar.gz /tmp/`: 压缩
* `tar -zxvf tmp.tar.gz`：解压缩

### bzip2
* `tar -jcvf test.tar.bz2 *`: 压缩
* `tar -jxvf test.tar.bz2`：解压缩

## zip打包命令

### 格式

`zip [选项] 文件`

`unzip [选项] 文件`

| 选项 | 含义 | 备注 |
| --- | ------- | ---- |
|`-r`|递归压缩目录，及将制定目录下的所有文件以及子目录全部压缩| --- |
|`-m`|将文件压缩之后，删除原始文件，相当于把文件移到压缩文件中| --- |
|`-v`|显示详细的压缩过程信息| --- |
|`-q`|在压缩的时候不显示命令的执行过程| --- |
|`<压缩级别>` | 压缩级别是从 1~9 的数字，-1 代表压缩速度更快，-9 代表压缩效果更好| --- |
|`-u`|更新压缩文件，即往压缩文件中添加新文件| --- |


### zip示例

| 命令 | 功能 | 备注 |
| ----- | --- | ---- |
| `zip package.zip file` | 压缩单个文件 | ---- |
| `zip package.zip file1 file2` | 压缩多个文件 | ---- |
| `zip -r package.zip folder` | 压缩单个文件夹 | ---- |
| `zip -r package.zip folder1 folder2` | 压缩多个文件夹 | ---- |
| `zip -r package.zip file1 folder1 file2` | 压缩文件、文件夹 | ---- |
| `zip -e package.zip file` | 压缩时加密码 | ---- |
| `unzip -d package package.zip` | 解压缩到`package`目录下,如果`package`文件夹不存在，则会自动创建这个文件夹 | ---- |
| `unzip -l package.zip` | 查看压缩包里面有什么，再决定看不看解压，也可以使用`-v`,显示更详细的内容 | ---- |
| `unzip package.zip package/index.html` | 解压出内部特定的一个文件 | ---- |
